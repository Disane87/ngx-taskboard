
dist: trusty
sudo: false
language: node_js
node_js:
  - '8'

cache:
  directories:
    - ./node_modules


script: echo "Running tests against $(node -v) ..."

install:
  - npm install 

stages:
  - name: "Build"
  - name: "Lint"
  - name: "Test"
  - name: "Publish"
    if: branch = master AND type = push
  - name: "Stackblitz"

jobs:
  include:
    - stage: "Build"    
      script:
        - echo "Running Build against $(node -v) ..."

    - stage: "Lint"  
      script:
        - echo "Running Lint against $(node -v) ..."
    
    - stage: "Test"  
      script:
        - echo "Running Test against $(node -v) ..."

    - stage: "Stackblitz"

    - stage: "Publish"
      deploy:
      provider: script
      skip_cleanup: true
      script:
        
        - nvm install lts/*
        - npm run semantic-release
      on:
        branch: master



# after_success:
# - bash <(curl -s https://codecov.io/bash)